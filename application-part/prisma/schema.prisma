generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model events {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title       String       @db.VarChar(200)
  description String       @db.VarChar(1500)
  date        DateTime     @db.Date
  city        String       @db.VarChar(100)
  created_by  String       @db.Uuid
  users       users        @relation(fields: [created_by], references: [id], onDelete: Cascade, onUpdate: NoAction)
  rsvp_counts rsvp_counts?
  rsvps       rsvps[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model rsvps {
  id       String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id  String  @db.Uuid
  event_id String  @db.Uuid
  status   String? @db.VarChar(20)
  events   events  @relation(fields: [event_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users    users   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, event_id])
}

model users {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name       String    @db.VarChar(100)
  email      String    @unique @db.VarChar(320)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  events     events[]
  rsvps      rsvps[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model rsvp_counts {
  event_id   String @id @db.Uuid
  rsvp_count Int?   @default(0)
  events     events @relation(fields: [event_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}
